var e=globalThis,t={},i={},r=e.parcelRequiref046;function a(e){return e/180*Math.PI}null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in i){var r=i[e];delete i[e];var a={id:e,exports:{}};return t[e]=a,r.call(a.exports,a,a.exports),a.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){i[e]=t},e.parcelRequiref046=r),(0,r.register)("27Lyk",function(e,t){Object.defineProperty(e.exports,"register",{get:()=>i,set:e=>i=e,enumerable:!0,configurable:!0});var i,r=new Map;i=function(e,t){for(var i=0;i<t.length-1;i+=2)r.set(t[i],{baseUrl:e,path:t[i+1]})}}),r("27Lyk").register(new URL("",import.meta.url).toString(),JSON.parse('["iSzgC","index.52661006.js","3Ctj8","primitive_1.619d737d.png","erJEF","primitive_2.47181784.png","2h2n9","primitive_3.e3e59828.png","13oPy","primitive_4.09f8dc0e.png","h9ub2","primitive_5.7be3f88e.png","2zYnc","primitive_6.c0c2f77c.png","hUZmR","primitive_7.0715f6de.png","hgiwu","primitive_8.b4b96219.png","1F59b","primitive_9.f6c8bc44.png","3Fi8u","primitive_10.d1b06665.png","jR9dF","primitive_11.c3964df0.png","imi32","primitive_12.5ce4d94e.png","4hIjp","primitive_13.a975dcb7.png","25a2N","primitive_14.07f8194b.png","6uUHv","primitive_15.75934027.png","dz7wn","primitive_16.f056dac5.png","fyspn","primitive_17.dd17141a.png","hYkeP","primitive_18.53dd73fc.png","kVvBT","primitive_19.e9da6700.png","b0u6v","primitive_20.aa064793.png","gWdNk","primitive_21.c10851dd.png","27l7W","primitive_22.4169d9de.png","cP7nL","primitive_23.8f678296.png","eZYgR","primitive_24.82e1e60f.png","lg9qI","primitive_25.c6cc2249.png","jk3aK","primitive_26.04a2f442.png","9PWpC","primitive_27.dc69f377.png","e0uKM","primitive_28.f4bd7ffb.png","6YctZ","primitive_29.b0513ba9.png","4HTgW","primitive_30.9e998300.png","6kJgF","primitive_31.f8c7a6cc.png","1F5RH","primitive_32.89550f83.png","aecfE","primitive_33.ba9f3e9c.png","55ZCn","primitive_34.84751769.png","dqJny","primitive_35.4c779fe2.png","ihwvi","primitive_36.630c24b8.png","159yK","primitive_37.19c5d062.png","koJTF","primitive_39.d5d58361.png","3lrEl","primitive_40.446d6bac.png","gv6mk","primitive_41.f76b8b97.png","9HKNe","primitive_42.6c9b62e1.png","j5AjE","primitive_43.18529397.png"]'));const n={};var o={};o=new URL("primitive_1.619d737d.png",import.meta.url).toString(),n[1]=new URL(o);var c={};c=new URL("primitive_2.47181784.png",import.meta.url).toString(),n[2]=new URL(c);var p={};p=new URL("primitive_3.e3e59828.png",import.meta.url).toString(),n[3]=new URL(p);var m={};m=new URL("primitive_4.09f8dc0e.png",import.meta.url).toString(),n[4]=new URL(m);var s={};s=new URL("primitive_5.7be3f88e.png",import.meta.url).toString(),n[5]=new URL(s);var _={};_=new URL("primitive_6.c0c2f77c.png",import.meta.url).toString(),n[6]=new URL(_);var d={};d=new URL("primitive_7.0715f6de.png",import.meta.url).toString(),n[7]=new URL(d);var g={};g=new URL("primitive_8.b4b96219.png",import.meta.url).toString(),n[8]=new URL(g);var v={};v=new URL("primitive_9.f6c8bc44.png",import.meta.url).toString(),n[9]=new URL(v);var l={};l=new URL("primitive_10.d1b06665.png",import.meta.url).toString(),n[10]=new URL(l);var H={};H=new URL("primitive_11.c3964df0.png",import.meta.url).toString(),n[11]=new URL(H);var R={};R=new URL("primitive_12.5ce4d94e.png",import.meta.url).toString(),n[12]=new URL(R);var u={};u=new URL("primitive_13.a975dcb7.png",import.meta.url).toString(),n[13]=new URL(u);var S={};S=new URL("primitive_14.07f8194b.png",import.meta.url).toString(),n[14]=new URL(S);var h={};h=new URL("primitive_15.75934027.png",import.meta.url).toString(),n[15]=new URL(h);var w={};w=new URL("primitive_16.f056dac5.png",import.meta.url).toString(),n[16]=new URL(w);var b={};b=new URL("primitive_17.dd17141a.png",import.meta.url).toString(),n[17]=new URL(b);var f={};f=new URL("primitive_18.53dd73fc.png",import.meta.url).toString(),n[18]=new URL(f);var E={};E=new URL("primitive_19.e9da6700.png",import.meta.url).toString(),n[19]=new URL(E);var L={};L=new URL("primitive_20.aa064793.png",import.meta.url).toString(),n[20]=new URL(L);var F={};F=new URL("primitive_21.c10851dd.png",import.meta.url).toString(),n[21]=new URL(F);var A={};A=new URL("primitive_22.4169d9de.png",import.meta.url).toString(),n[22]=new URL(A);var U={};U=new URL("primitive_23.8f678296.png",import.meta.url).toString(),n[23]=new URL(U);var y={};y=new URL("primitive_24.82e1e60f.png",import.meta.url).toString(),n[24]=new URL(y);var x={};x=new URL("primitive_25.c6cc2249.png",import.meta.url).toString(),n[25]=new URL(x);var C={};C=new URL("primitive_26.04a2f442.png",import.meta.url).toString(),n[26]=new URL(C);var P={};P=new URL("primitive_27.dc69f377.png",import.meta.url).toString(),n[27]=new URL(P);var q={};q=new URL("primitive_28.f4bd7ffb.png",import.meta.url).toString(),n[28]=new URL(q);var k={};k=new URL("primitive_29.b0513ba9.png",import.meta.url).toString(),n[29]=new URL(k);var I={};I=new URL("primitive_30.9e998300.png",import.meta.url).toString(),n[30]=new URL(I);var D={};D=new URL("primitive_31.f8c7a6cc.png",import.meta.url).toString(),n[31]=new URL(D);var T={};T=new URL("primitive_32.89550f83.png",import.meta.url).toString(),n[32]=new URL(T);var $={};$=new URL("primitive_33.ba9f3e9c.png",import.meta.url).toString(),n[33]=new URL($);var G={};G=new URL("primitive_34.84751769.png",import.meta.url).toString(),n[34]=new URL(G);var O={};O=new URL("primitive_35.4c779fe2.png",import.meta.url).toString(),n[35]=new URL(O);var W={};W=new URL("primitive_36.630c24b8.png",import.meta.url).toString(),n[36]=new URL(W);var j={};j=new URL("primitive_37.19c5d062.png",import.meta.url).toString(),n[37]=new URL(j);var N={};N=new URL("primitive_39.d5d58361.png",import.meta.url).toString(),n[39]=new URL(N);var J={};J=new URL("primitive_40.446d6bac.png",import.meta.url).toString(),n[40]=new URL(J);var M={};M=new URL("primitive_41.f76b8b97.png",import.meta.url).toString(),n[41]=new URL(M);var K={};K=new URL("primitive_42.6c9b62e1.png",import.meta.url).toString(),n[42]=new URL(K);var Y={};Y=new URL("primitive_43.18529397.png",import.meta.url).toString(),n[43]=new URL(Y);class Z{constructor(e=1){this.ready=!1,this.url=n[e],this.rawData=new Image,this.rawData.src=this.url,this.rawData.addEventListener("load",()=>{this.imageData=new Image,this.imageData.src=function(e){let t=document.createElement("canvas"),i=t.getContext("2d");t.width=e.width,t.height=e.height,i.drawImage(e,0,0);let r=i.getImageData(0,0,t.width,t.height);for(let e=0;e<r.height;++e)for(let t=0;t<r.width;++t){let i=e*r.width*4+4*t,[a,n,o]=r.data.slice(i,i+3);r.data[i+3]=255-(a+n+o)/3}return i.putImageData(r,0,0),t.toDataURL()}(this.rawData),this.imageData.addEventListener("load",()=>{this.ready=!0})})}draw(e,{distance:t,angle:i,rotation:r,scale:n,order:o}){if(!this.ready)return;let c=e.getContext("2d");c.clearRect(0,0,e.width,e.height);for(let p=0;p<o;++p){let m=i+360*p/o;c.save(),c.translate(e.width/2,e.height/2),c.rotate(a(-90+m)),c.translate(t*e.width/2,0),c.rotate(a(90+r)),c.scale(n,n),c.translate(-this.imageData.width/2,-this.imageData.height/2),c.drawImage(this.imageData,0,0),c.restore()}}}const z={};for(const e in n)z[e]=new Z(e);function B(e,t){let{primitive:i,props:r,offCanvas:a}=e.get(t);i.draw(a,r)}const[V,Q]=[800,800],X=document.querySelector("#main-canvas");[X.width,X.height]=[V,Q];const ee=new class{constructor(e=8,t=12,i=10,r=0,a=0,{canvasWidth:n=800,canvasHeight:o=800}={}){this.symOrder=e,this.divisions=t,this.radialInc=i,this.orientation=r,this.hue=a,this.canvasWidth=n,this.canvasHeight=o,this.canvas=document.createElement("canvas"),this.canvas.width=n,this.canvas.height=o}draw(){let e=this.canvas.getContext("2d");e.save(),e.translate(this.canvas.width/2,this.canvas.height/2);for(let t=0;t<this.canvas.width/2;t+=this.radialInc)e.save(),e.strokeStyle=`hwb(${this.hue} 75% 0%)`,e.beginPath(),e.arc(0,0,t,0,a(360)),e.closePath(),e.stroke(),e.restore();for(let t=0;t<this.symOrder*this.divisions;t++)e.save(),e.rotate(a(this.orientation)+a(t*(360/(this.symOrder*this.divisions)))),e.strokeStyle=`hwb(${this.hue} 50% 0%)`,e.beginPath(),e.moveTo(0,0),e.lineTo(this.canvas.width/2,0),e.closePath(),e.stroke(),e.restore();for(let t=0;t<this.symOrder;t++)e.save(),e.rotate(a(this.orientation)+a(t*(360/this.symOrder))),e.strokeStyle=`hwb(${this.hue} 0% 0%)`,e.beginPath(),e.moveTo(0,0),e.lineTo(this.canvas.width/2,0),e.closePath(),e.stroke(),e.restore();e.restore()}drawImageTo(e){e.getContext("2d").drawImage(this.canvas,0,0)}};ee.draw();const et=new class{constructor(){this.selectedPrimitive=null}getState(){return this.selectedPrimitive}changeState(e){this.selectedPrimitive=e}},ei=new class{constructor({canvasWidth:e=800,canvasHeight:t=800}={}){this.primitiveGroup=new Map,this.canvasWidth=e,this.canvasHeight=t}addPrimitive(e,t,{distance:i=.5,angle:r=0,rotation:a=0,scale:n=.1,order:o=1}={}){let c=document.createElement("canvas");c.width=this.canvasWidth,c.height=this.canvasHeight,this.primitiveGroup.set(e,{primitive:t,props:{distance:i,angle:r,rotation:a,scale:n,order:o},offCanvas:c}),B(this.primitiveGroup,e)}removePrimitive(e){return this.primitiveGroup.delete(e)}getPrimitiveState(e){return this.primitiveGroup.get(e)}updatePrimitiveState(e,{distance:t,angle:i,rotation:r,scale:a,order:n}={}){let o=this.primitiveGroup.get(e).props,c={};c.distance=t??o.distance,c.angle=i??o.angle,c.rotation=r??o.rotation,c.scale=a??o.scale,c.order=n??o.order,this.primitiveGroup.get(e).props=c,B(this.primitiveGroup,e)}drawImageTo(e){let t=e.getContext("2d");this.primitiveGroup.forEach(({offCanvas:e})=>{t.drawImage(e,0,0)})}},er=document.querySelector("#prim-option-box");for(const e in z)!function(e,t){let i=document.createElement("button"),r=document.createElement("img");r.classList.add("image-icon"),r.src=z[t].url,i.appendChild(r),i.classList.add("image-button"),i.addEventListener("click",()=>{let e=document.querySelector("#prim-used-box"),i=Symbol();ei.addPrimitive(i,z[t],{order:8}),ec(i),requestAnimationFrame(eo),function(e,t,i){let r=document.createElement("div"),a=document.createElement("img");a.classList.add("image-icon"),a.src=z[t].url,r.appendChild(a);let n=document.createElement("button");n.textContent="Delete",n.addEventListener("click",e=>{e.stopPropagation(),ei.removePrimitive(i),ec(null),requestAnimationFrame(eo),r.remove()}),r.appendChild(n),r.classList.add("prim-entry"),r.addEventListener("click",()=>{ec(i)}),e.appendChild(r)}(e,t,i)}),e.appendChild(i)}(er,e);const ea={distance:document.querySelector("#control-distance"),angle:document.querySelector("#control-angle"),rotation:document.querySelector("#control-rotation"),scale:document.querySelector("#control-scale")},en={distance:document.querySelector("#control-distance + span"),angle:document.querySelector("#control-angle + span"),rotation:document.querySelector("#control-rotation + span"),scale:document.querySelector("#control-scale + span")};function eo(){X.getContext("2d"),function(e){e.getContext("2d").clearRect(0,0,e.width,e.height)}(X),ee.drawImageTo(X,0,0),ei.drawImageTo(X)}function ec(e){et.changeState(e);let t=document.querySelector("#controls-set");if(null===e)t.classList.add("hidden");else{t.classList.remove("hidden");let i=ei.primitiveGroup.get(e).props;ea.distance.value=`${i.distance}`,ea.angle.value=`${i.angle}`,ea.rotation.value=`${i.rotation}`,ea.scale.value=`${i.scale}`,en.distance.textContent=`${i.distance}`,en.angle.textContent=`${i.angle}`,en.rotation.textContent=`${i.rotation}`,en.scale.textContent=`${i.scale}`}}ea.distance.min="0",ea.distance.max="1",ea.distance.step="0.01",ea.distance.addEventListener("input",e=>{ei.updatePrimitiveState(et.getState(),{distance:+e.target.value}),en.distance.textContent=+e.target.value,requestAnimationFrame(eo)}),ea.angle.min="0",ea.angle.max="359",ea.angle.addEventListener("input",e=>{ei.updatePrimitiveState(et.getState(),{angle:+e.target.value}),en.angle.textContent=+e.target.value,requestAnimationFrame(eo)}),ea.rotation.min="0",ea.rotation.max="359",ea.rotation.addEventListener("input",e=>{ei.updatePrimitiveState(et.getState(),{rotation:+e.target.value}),en.rotation.textContent=+e.target.value,requestAnimationFrame(eo)}),ea.scale.min="0",ea.scale.max="1",ea.scale.step="0.01",ea.scale.addEventListener("input",e=>{ei.updatePrimitiveState(et.getState(),{scale:+e.target.value}),en.scale.textContent=+e.target.value,requestAnimationFrame(eo)}),window.onload=function(){window.requestAnimationFrame(eo)};
//# sourceMappingURL=index.52661006.js.map
