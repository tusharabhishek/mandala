var e=globalThis,t={},i={},r=e.parcelRequiref046;function a(e){return e/180*Math.PI}null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in i){var r=i[e];delete i[e];var a={id:e,exports:{}};return t[e]=a,r.call(a.exports,a,a.exports),a.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){i[e]=t},e.parcelRequiref046=r),(0,r.register)("27Lyk",function(e,t){Object.defineProperty(e.exports,"register",{get:()=>i,set:e=>i=e,enumerable:!0,configurable:!0});var i,r=new Map;i=function(e,t){for(var i=0;i<t.length-1;i+=2)r.set(t[i],{baseUrl:e,path:t[i+1]})}}),r("27Lyk").register(new URL("",import.meta.url).toString(),JSON.parse('["iSzgC","index.df7175d7.js","3Ctj8","primitive_1.619d737d.png","erJEF","primitive_2.47181784.png","2h2n9","primitive_3.e3e59828.png","13oPy","primitive_4.09f8dc0e.png","h9ub2","primitive_5.7be3f88e.png","2zYnc","primitive_6.c0c2f77c.png","hUZmR","primitive_7.0715f6de.png","hgiwu","primitive_8.b4b96219.png","1F59b","primitive_9.f6c8bc44.png","3Fi8u","primitive_10.d1b06665.png","jR9dF","primitive_11.c3964df0.png","imi32","primitive_12.5ce4d94e.png","4hIjp","primitive_13.a975dcb7.png","25a2N","primitive_14.07f8194b.png","6uUHv","primitive_15.75934027.png","dz7wn","primitive_16.f056dac5.png","fyspn","primitive_17.dd17141a.png","hYkeP","primitive_18.53dd73fc.png","kVvBT","primitive_19.e9da6700.png","b0u6v","primitive_20.aa064793.png","gWdNk","primitive_21.c10851dd.png","27l7W","primitive_22.4169d9de.png","cP7nL","primitive_23.8f678296.png","eZYgR","primitive_24.82e1e60f.png","lg9qI","primitive_25.c6cc2249.png","jk3aK","primitive_26.04a2f442.png","9PWpC","primitive_27.dc69f377.png","e0uKM","primitive_28.f4bd7ffb.png","6YctZ","primitive_29.b0513ba9.png","4HTgW","primitive_30.9e998300.png","6kJgF","primitive_31.f8c7a6cc.png","1F5RH","primitive_32.89550f83.png","aecfE","primitive_33.ba9f3e9c.png","55ZCn","primitive_34.84751769.png","dqJny","primitive_35.4c779fe2.png","ihwvi","primitive_36.630c24b8.png","159yK","primitive_37.19c5d062.png","koJTF","primitive_39.d5d58361.png","3lrEl","primitive_40.446d6bac.png","gv6mk","primitive_41.f76b8b97.png","9HKNe","primitive_42.6c9b62e1.png","j5AjE","primitive_43.18529397.png"]'));const n={};var o={};o=new URL("primitive_1.619d737d.png",import.meta.url).toString(),n[1]=new URL(o);var c={};c=new URL("primitive_2.47181784.png",import.meta.url).toString(),n[2]=new URL(c);var m={};m=new URL("primitive_3.e3e59828.png",import.meta.url).toString(),n[3]=new URL(m);var p={};p=new URL("primitive_4.09f8dc0e.png",import.meta.url).toString(),n[4]=new URL(p);var d={};d=new URL("primitive_5.7be3f88e.png",import.meta.url).toString(),n[5]=new URL(d);var l={};l=new URL("primitive_6.c0c2f77c.png",import.meta.url).toString(),n[6]=new URL(l);var s={};s=new URL("primitive_7.0715f6de.png",import.meta.url).toString(),n[7]=new URL(s);var _={};_=new URL("primitive_8.b4b96219.png",import.meta.url).toString(),n[8]=new URL(_);var g={};g=new URL("primitive_9.f6c8bc44.png",import.meta.url).toString(),n[9]=new URL(g);var v={};v=new URL("primitive_10.d1b06665.png",import.meta.url).toString(),n[10]=new URL(v);var u={};u=new URL("primitive_11.c3964df0.png",import.meta.url).toString(),n[11]=new URL(u);var h={};h=new URL("primitive_12.5ce4d94e.png",import.meta.url).toString(),n[12]=new URL(h);var R={};R=new URL("primitive_13.a975dcb7.png",import.meta.url).toString(),n[13]=new URL(R);var H={};H=new URL("primitive_14.07f8194b.png",import.meta.url).toString(),n[14]=new URL(H);var S={};S=new URL("primitive_15.75934027.png",import.meta.url).toString(),n[15]=new URL(S);var w={};w=new URL("primitive_16.f056dac5.png",import.meta.url).toString(),n[16]=new URL(w);var f={};f=new URL("primitive_17.dd17141a.png",import.meta.url).toString(),n[17]=new URL(f);var b={};b=new URL("primitive_18.53dd73fc.png",import.meta.url).toString(),n[18]=new URL(b);var E={};E=new URL("primitive_19.e9da6700.png",import.meta.url).toString(),n[19]=new URL(E);var L={};L=new URL("primitive_20.aa064793.png",import.meta.url).toString(),n[20]=new URL(L);var F={};F=new URL("primitive_21.c10851dd.png",import.meta.url).toString(),n[21]=new URL(F);var U={};U=new URL("primitive_22.4169d9de.png",import.meta.url).toString(),n[22]=new URL(U);var A={};A=new URL("primitive_23.8f678296.png",import.meta.url).toString(),n[23]=new URL(A);var y={};y=new URL("primitive_24.82e1e60f.png",import.meta.url).toString(),n[24]=new URL(y);var k={};k=new URL("primitive_25.c6cc2249.png",import.meta.url).toString(),n[25]=new URL(k);var q={};q=new URL("primitive_26.04a2f442.png",import.meta.url).toString(),n[26]=new URL(q);var x={};x=new URL("primitive_27.dc69f377.png",import.meta.url).toString(),n[27]=new URL(x);var P={};P=new URL("primitive_28.f4bd7ffb.png",import.meta.url).toString(),n[28]=new URL(P);var C={};C=new URL("primitive_29.b0513ba9.png",import.meta.url).toString(),n[29]=new URL(C);var I={};I=new URL("primitive_30.9e998300.png",import.meta.url).toString(),n[30]=new URL(I);var D={};D=new URL("primitive_31.f8c7a6cc.png",import.meta.url).toString(),n[31]=new URL(D);var T={};T=new URL("primitive_32.89550f83.png",import.meta.url).toString(),n[32]=new URL(T);var O={};O=new URL("primitive_33.ba9f3e9c.png",import.meta.url).toString(),n[33]=new URL(O);var j={};j=new URL("primitive_34.84751769.png",import.meta.url).toString(),n[34]=new URL(j);var G={};G=new URL("primitive_35.4c779fe2.png",import.meta.url).toString(),n[35]=new URL(G);var N={};N=new URL("primitive_36.630c24b8.png",import.meta.url).toString(),n[36]=new URL(N);var W={};W=new URL("primitive_37.19c5d062.png",import.meta.url).toString(),n[37]=new URL(W);var J={};J=new URL("primitive_39.d5d58361.png",import.meta.url).toString(),n[39]=new URL(J);var M={};M=new URL("primitive_40.446d6bac.png",import.meta.url).toString(),n[40]=new URL(M);var K={};K=new URL("primitive_41.f76b8b97.png",import.meta.url).toString(),n[41]=new URL(K);var Y={};Y=new URL("primitive_42.6c9b62e1.png",import.meta.url).toString(),n[42]=new URL(Y);var Z={};Z=new URL("primitive_43.18529397.png",import.meta.url).toString(),n[43]=new URL(Z);class z{constructor(e=1){this.ready=!1,this.url=n[e],this.rawData=new Image,this.rawData.src=this.url,this.rawData.addEventListener("load",()=>{this.imageData=new Image,this.imageData.src=function(e){let t=document.createElement("canvas"),i=t.getContext("2d");t.width=e.width,t.height=e.height,i.drawImage(e,0,0);let r=i.getImageData(0,0,t.width,t.height);for(let e=0;e<r.height;++e)for(let t=0;t<r.width;++t){let i=e*r.width*4+4*t,[a,n,o]=r.data.slice(i,i+3);r.data[i+3]=255-(a+n+o)/3}return i.putImageData(r,0,0),t.toDataURL()}(this.rawData),this.imageData.addEventListener("load",()=>{this.ready=!0})})}draw(e,{distance:t,angle:i,rotation:r,scale:n,order:o,multiplicity:c,flip:m}){if(!this.ready)return;let p=e.getContext("2d");p.clearRect(0,0,e.width,e.height);let d=o*c;for(let o=0;o<d;++o){let c=i+360*o/d;p.save(),p.translate(e.width/2,e.height/2),p.rotate(a(-90+c)),p.translate(t*e.width/2,0),p.rotate(a(90+r)),p.scale(n,n),p.translate(-this.imageData.width/2,-this.imageData.height/2),p.drawImage(this.imageData,0,0),p.restore(),m&&(c=i+(o+.5)*360/d,p.save(),p.translate(e.width/2,e.height/2),p.rotate(a(-90+c)),p.translate(t*e.width/2,0),p.scale(n,-n),p.rotate(a(90+r)),p.translate(-this.imageData.width/2,-this.imageData.height/2),p.drawImage(this.imageData,0,0),p.restore())}}}const $={};for(const e in n)$[e]=new z(e);function B(e,t){let{primitive:i,props:r,offCanvas:a}=e.get(t);i.draw(a,r)}function V(){return[{distance:document.querySelector("#slider-distance"),angle:document.querySelector("#slider-angle"),rotation:document.querySelector("#slider-rotation"),scale:document.querySelector("#slider-scale"),multiplicity:document.querySelector("#slider-multiplicity")},{distance:document.querySelector("#number-distance"),angle:document.querySelector("#number-angle"),rotation:document.querySelector("#number-rotation"),scale:document.querySelector("#number-scale"),multiplicity:document.querySelector("#number-multiplicity")}]}function Q(e,t){V().forEach(i=>{i[e].value=t})}function X(e){let t=document.querySelector("#checkbox-flip");console.log(e),t.checked=e}const ee=[{name:"distance",min:"0",max:"1",step:"0.001",initial:"0.5"},{name:"angle",min:"0",max:"360",step:"0.001",initial:"0"},{name:"rotation",min:"0",max:"360",step:"0.001",initial:"0"},{name:"scale",min:"0",max:"1",step:"0.001",initial:"0.1"},{name:"multiplicity",min:"1",max:"8",step:"1",initial:"1"}],[et,ei]=[800,800],er=document.querySelector("#main-canvas");[er.width,er.height]=[et,ei];const ea=new class{constructor(){this.selectedPrimitive=null}getState(){return this.selectedPrimitive}changeState(e){this.selectedPrimitive=e}},en=new class{constructor({canvasWidth:e=800,canvasHeight:t=800}={}){this.primitiveGroup=new Map,this.canvasWidth=e,this.canvasHeight=t}addPrimitive(e,t,{distance:i=.5,angle:r=0,rotation:a=0,scale:n=.1,order:o=1,multiplicity:c=1,flip:m=!1}={}){let p=document.createElement("canvas");p.width=this.canvasWidth,p.height=this.canvasHeight,this.primitiveGroup.set(e,{primitive:t,props:{distance:i,angle:r,rotation:a,scale:n,order:o,multiplicity:c,flip:m},offCanvas:p}),B(this.primitiveGroup,e)}removePrimitive(e){return this.primitiveGroup.delete(e)}getPrimitiveState(e){return this.primitiveGroup.get(e)}updatePrimitiveState(e,{distance:t,angle:i,rotation:r,scale:a,order:n,multiplicity:o,flip:c}={}){let m=this.primitiveGroup.get(e).props,p={};p.distance=t??m.distance,p.angle=i??m.angle,p.rotation=r??m.rotation,p.scale=a??m.scale,p.order=n??m.order,p.multiplicity=o??m.multiplicity,p.flip=c??m.flip,this.primitiveGroup.get(e).props=p,B(this.primitiveGroup,e)}drawImageTo(e){let t=e.getContext("2d");this.primitiveGroup.forEach(({offCanvas:e})=>{t.drawImage(e,0,0)})}},eo=new class{constructor(e=8,t=12,i=10,r=0,a=0,{canvasWidth:n=800,canvasHeight:o=800}={}){this.symOrder=e,this.divisions=t,this.radialInc=i,this.orientation=r,this.hue=a,this.canvasWidth=n,this.canvasHeight=o,this.canvas=document.createElement("canvas"),this.canvas.width=n,this.canvas.height=o,this.visible=!1}toggle(e){void 0===e?this.visible=!this.visible:this.visible=e}draw(){let e=this.canvas.getContext("2d");e.save(),e.translate(this.canvas.width/2,this.canvas.height/2);for(let t=0;t<this.canvas.width/2;t+=this.radialInc)e.save(),e.strokeStyle=`hwb(${this.hue} 75% 0%)`,e.beginPath(),e.arc(0,0,t,0,a(360)),e.closePath(),e.stroke(),e.restore();for(let t=0;t<this.symOrder*this.divisions;t++)e.save(),e.rotate(a(this.orientation)+a(t*(360/(this.symOrder*this.divisions)))),e.strokeStyle=`hwb(${this.hue} 50% 0%)`,e.beginPath(),e.moveTo(0,0),e.lineTo(this.canvas.width/2,0),e.closePath(),e.stroke(),e.restore();for(let t=0;t<this.symOrder;t++)e.save(),e.rotate(a(this.orientation)+a(t*(360/this.symOrder))),e.strokeStyle=`hwb(${this.hue} 0% 0%)`,e.beginPath(),e.moveTo(0,0),e.lineTo(this.canvas.width/2,0),e.closePath(),e.stroke(),e.restore();e.restore()}drawImageTo(e){this.visible&&e.getContext("2d").drawImage(this.canvas,0,0)}};function ec(){!function(e){e.getContext("2d").clearRect(0,0,e.width,e.height)}(er),eo.drawImageTo(er,0,0),en.drawImageTo(er)}function em(e){if(ea.changeState(e),!function(e=!0){let t=document.querySelector("#fieldset-controls");e?t.classList.remove("hidden"):t.classList.add("hidden")}(null!==e),null!==e){let t=en.getPrimitiveState(e).props;ee.forEach(e=>{Q(e.name,t[e.name])}),X(t.flip)}requestAnimationFrame(ec)}eo.draw(),window.onload=function(){var e;for(let a in window.requestAnimationFrame(ec),function(e){let t=document.querySelector("#grid-toggle");t.checked=!1,t.addEventListener("change",t=>{e(t.target.checked)})}(e=>{eo.visible=e,requestAnimationFrame(ec)}),e=()=>{let e=document.createElement("canvas");e.width=et,e.height=ei,en.drawImageTo(e),e.toBlob(e=>{let t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="mandala.png",t.classList.add("hidden"),document.body.appendChild(t),t.click(),document.body.removeChild(t)})},document.querySelector("#save-button").addEventListener("click",t=>{e()}),$){function t(){let e=Symbol();return en.addPrimitive(e,$[a],{order:8}),em(e),e}function i(e){em(e)}function r(e){en.removePrimitive(e),em(null)}!function(e,t,i,r){let a=document.querySelector("#prim-option-box"),n=document.createElement("button"),o=document.createElement("img");o.classList.add("image-icon"),o.src=e.url,n.appendChild(o),n.classList.add("image-button"),n.addEventListener("click",()=>{(function(e,t,i,r){let a=document.querySelector("#prim-used-box"),n=document.createElement("div"),o=document.createElement("img");o.classList.add("image-icon"),o.src=e.url,n.appendChild(o);let c=document.createElement("button");c.textContent="Delete",c.addEventListener("click",e=>{e.stopPropagation(),r(t),n.remove()}),n.appendChild(c),n.classList.add("prim-entry"),n.addEventListener("click",()=>{i(t)}),a.appendChild(n)})(e,t(),i,r)}),a.appendChild(n)}($[a],t,i,r)}ee.forEach(({name:e,min:t,max:i,step:r,initial:a})=>{!function(e,{min:t,max:i,step:r,initial:a},n){let[o,c]=V();[o,c].forEach(n=>{n[e].min=t,n[e].max=i,n[e].step=r,n[e].value=a}),o[e].addEventListener("input",e=>{n(+e.target.value)}),c[e].addEventListener("input",e=>{e.target.classList.remove("invalid")}),c[e].addEventListener("change",r=>{let a="multiplicity"==e?Number.parseInt(r.target.value):Number.parseFloat(r.target.value);Number.isFinite(a)&&a>=t&a<=i?n(a):r.target.classList.add("invalid")})}(e,{min:t,max:i,step:r,initial:a},function(t){let i={};i[e]=t,en.updatePrimitiveState(ea.getState(),i),Q(e,t),requestAnimationFrame(ec)})}),function(e){let t=document.querySelector("#checkbox-flip");t.checked=!1,t.addEventListener("change",t=>{e(t.target.checked)})}(e=>{en.updatePrimitiveState(ea.getState(),{flip:e}),X(e),requestAnimationFrame(ec)})};
//# sourceMappingURL=index.df7175d7.js.map
